!function(t,e){"use strict";function n(){var n=function(n){var i=this;i.sdkUtils=new t.HieknSDKService,i.defaultPromptSettings={baseUrl:n.baseUrl,data:n.data,kgName:n.kgName},i.promptSettings=e.extend(!0,{},i.defaultPromptSettings,n.promptSettings||{}),i.defaultOptions={lightColor:"#fff",primaryColor:"#00b38a",primaryLightColor:"rgba(0,179,138,0.3)",emphasesColor:"#faa01b",emphasesLightColor:"rgba(250, 160, 27,0.3)",kgName:null,baseUrl:null,data:{},instanceEnable:!1,tgc2Settings:{selector:null,netChart:{settings:{toolbar:{enabled:!1},info:{enabled:!1},nodeMenu:{},style:{selection:{enabled:!1,fillColor:""},nodeStyleFunction:function(t){i.nodeStyleFunction(t)},nodeHovered:{shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"},linkStyleFunction:function(t){t.hovered&&(t.label=t.data.attName),t.toDecoration="arrow",t.fillColor="#ddd"},linkLabel:{textStyle:{fillColor:"#999"}}}}},prompt:{style:{top:"10px",right:"10px",left:"auto",bottom:"auto"},enable:!0,settings:{onPrompt:i.sdkUtils.onPrompt(i.promptSettings)}},page:{style:{right:"10px",bottom:"20px"},enable:!0,pageSize:20},loader:function(t,e,n){i.loader(t,e,n)}}},i.options=e.extend(!0,{},i.defaultOptions,n),i.options.tgc2Settings.selector=i.options.tgc2Settings.selector||i.options.selector,i.tgc2=null,i.tgc2Prompt=null,i.tgc2Page=null,i.init()};return n.prototype.init=function(){var t=this;t.tgc2=new Tgc2Graph(t.options.tgc2Settings),t.tgc2Prompt=new Tgc2Prompt(t.tgc2,t.options.tgc2Settings.prompt),t.tgc2Page=new Tgc2Page(t.tgc2,t.options.tgc2Settings.page),t.tgc2.init(),e(t.options.tgc2Settings.selector).addClass("tgc2 tgc2-concept-graph"),console.log(t.options),t.options.instanceEnable&&e(t.options.tgc2Settings.selector).append('<div class="tgc2-info-top"><ul class="info-top"><li class="current"><i class="fa fa-circle" style="color:'+t.options.emphasesColor+'"></i><span>当前节点</span></li><li class="concept"><i class="fa fa-circle" style="color:'+t.options.primaryColor+'"></i><span>概念</span></li><li class="instance"><i class="fa fa-circle-o" style="color:'+t.options.primaryColor+'"></i><span>实例</span></li></ul></div>'),e(t.options.tgc2Settings.selector).append('<div class="tgc2-info-bottom"><div class="info-bottom"><span>中心节点：</span><span name="name" style="color:'+t.options.emphasesColor+'"></span></div></div>')},n.prototype.load=function(t){var e=this;e.kgName=e.options.kgName,e.tgc2.load(t),setTimeout(function(){e.tgc2.resize()},300)},n.prototype.loader=function(t,n,i){var o=this,a=o.tgc2.startInfo,s=o.tgc2Page.page,r=o.options.data||{};r.type=a.kgType||0,r.pageNo=s.pageNo,r.pageSize=s.pageSize,r.kgName=o.options.kgName,r.entityId=a.id,hieknjs.kgLoader({url:o.options.baseUrl+"graph/knowlegde?"+e.param(r),type:0,that:e(o.options.tgc2Settings.selector)[0],success:function(s){if(s&&s.rsData&&s.rsData.length){if(s=s.rsData[0],s.entityList&&s.entityList.length)for(var r in s.entityList){var l=s.entityList[r];l.id==a.id&&e(o.options.tgc2Settings.selector).find(".tgc2-info-bottom").find('[name="name"]').text(l.name)}s.nodes=s.entityList,s.links=s.relationList,delete s.entityList,delete s.relationList,n(s),t.netChart.resetLayout()}else i&&i(),t.netChart.replaceData({nodes:[],links:[]})},error:function(){i&&i(),toastr.error("网络接口错误！")}})},n.prototype.nodeStyleFunction=function(t){var e=this,n=e.tgc2.startInfo;t.label=t.data.name,t.labelStyle.textStyle.font="18px Microsoft Yahei",t.aura=t.data.auras,t.radius=15,t.imageCropping="fit";var i=t.id==n.id;0==t.data.kgType?(t.lineWidth=10,t.lineColor=e.options.primaryLightColor,t.fillColor=e.options.primaryColor,t.image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhENzQwNUZFMTVFQjExRTc4QTJDOTY3REE4RkM4MjFCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhENzQwNUZGMTVFQjExRTc4QTJDOTY3REE4RkM4MjFCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEQ3NDA1RkMxNUVCMTFFNzhBMkM5NjdEQThGQzgyMUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEQ3NDA1RkQxNUVCMTFFNzhBMkM5NjdEQThGQzgyMUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7rBsIlAAAFUklEQVR42uydX05TURDGp5V3ygq8JJJINIGugLICy4PySF0BdQGGsgLqCixviibCCrisgJLoEybUFUjfNfVM7iESUyi1vXNmzvm+ZCJg0p5753fmzPlfGY1GBKWrCgAAAHgLAAACABAAgAAABAAgAAABAAgAxKDM2Zqzdf8zW83/Pk59Z9fOBt749wv/MwAwIHbuC2cNb9mcPpcByL2deEgAgCLtOGt6k9Cxt0MAELa27zpr+59DiCNB19k7q1HBIgDs7D1nrYCOHwdCz9m+NRCsAcA1vqPI8eNA6PiIAADmKM7a39+TvWsT9x5e+38BwIza87XKotrao4FmADjMf/HdOcviruOW1txAKwDWQr7ZJkEjAOz0U8WJ3iwJ4qY2CLQBEKvz1UKgCYDYna8SAi0ApOL82xDUScEkkwYAat7565SW+j4SXKcOAGf7LUpTPd87SBYAHig5oLT1hooJpeQAyJydJ9Tuq8wHQgLAo3xNgli8tmArJQCaHgDor7Y8CEkAcEXzW64Vi7gJWJb+0mqAB23B+XfmRK0UIgBqv6IoIA1Ag4pBH+hu8eBQHmsT0IJ/db0jyQhQ8+G/Bh9PHBdYJqEhYskI0ITzH1xRGjE2ARIPdeTsubMFjm4l2IL//COByhJdE1B29v/Z2UtBoD86e2W9NyAFAE/1npf8HVwzvwkC8MzZ1xI/f5kE5gekmgCJfv+lcFt9KVBposkBJB5mRRiAFQCg62H2hAF4CwCm69qULU4APzhbdfaoxPe16r9nO4J3JpYE5s42FPW1K/f8n5Zl0mcSXWcpALTtPrEAAI8ELgGAdAGYVE4AAAAAAAAw0gs4I0jlO6viPactAKBXUa0HyOHPqdWPCYAB/Jk2AH34U2elkVwQwm3aIrqBD9KQhOYCJJNA5AEPl9gWsWqMDxWBxCqLZBOQUbEuEE3AZC1RhMvCOanBiOBkid5HID0Q1IV/J6onGgoDbA7lSPAYTcBY/SDhjbPV2Ak3JvEIGSICcP+2HzgK8A6f32P+zmsJfwWs/eskfGxciAhwc6lCSD2d8u8S6lCAMwNDHhIVMhf4ROO3dUms9h2nCwp0UGZIACS2i90n3tvHd/x8d/aEin0F24HKUqdA8yWhD4rskPyGDm3aD9kkajgqlslfS9T5Imv/tQOQeQgWE3P+0DeDg9QBuMkH8oQgGPqaH3ydhKYLI1I6PTTIqaDaAWC1qDg+Pmbx8fA9LYXReGkUQ9CNsDngsN8mZUPhmq+NiyknUNPmWwEgJgjUOl87AERxHC1bJ8Wroi3cHcxt5o5R5x+S8uNxLQAQes5gFokc9RY7AEQ6VhFNK/HVPf8jK5tDBwZrv4kyY3dw4gIAAAACAFAZugYA81NuEIA+AEjsZVoss5VxAGtjAcFW+cYMgKURwTqhCSglpPJiiqHiMg59Gc00WZYiwO1IwAtGNpSVi1f4tq3lKxYBuFFGxXRxpiA3ycnoSWiWAYAAAAQAIAAApdENvC0+ZII3lfKpY6PA9tPZARm9F9liBOAXfUr6Rtq4+7dJRiaBLAPAYwC7SsumfhFoDACUfQn1LBK56St1ALQXuAIAym9rtR4oYWIlsPVeQBdlwziAxkTQXAJoGQBWg4pDJUJ3BwdUbF/LMQ4AAQAIAEAAAAIAYcXZ+MYc++Q8wnfsM30AoFw5lbde0OSET0oASIwPmOzvpwKA1MNUYnlhMW0OlRwQaiACpB0BxO71QwSYTicC33GGJFCvyr6QSsUR7wBgMgQd306vzdHxPA7Qjqn2xwoABAAgAAABAAgAQAAAAgAQAIAAAAQAoH/1R4ABAHF3K+2bw1JCAAAAAElFTkSuQmCC",i&&(t.fillColor=e.options.emphasesColor,t.lineColor=e.options.emphasesLightColor)):(t.lineWidth=2,t.lineColor=e.options.primaryColor,t.fillColor=e.options.lightColor,t.image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA3RUVGNzVBMTVFQzExRTdBM0FERjI5RjczQUM4N0QyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA3RUVGNzVCMTVFQzExRTdBM0FERjI5RjczQUM4N0QyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDdFRUY3NTgxNUVDMTFFN0EzQURGMjlGNzNBQzg3RDIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDdFRUY3NTkxNUVDMTFFN0EzQURGMjlGNzNBQzg3RDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5z4BZ4AAADHUlEQVR42uzbTU4UQRyG8QYMbLyBK1mKiR8L3RsXfnABWeugO7mIrkwEcc0FJGFhOIExaohLogtvIDGQCP47NAkboGeYwuqu35O8mYR0MdNTz1Qq1XknDg4OKpTLBAEI4FsgAAgAAoAAIAAIAAKAACAACAACgAAgAAgAAoAAIAAIAAKAACAACAACnMTKysq1eHkaeRi52vx5O7IRWY18L3kCBoNBPwWIiZ+Ol1eRF5HJEy7bj7yLLEX+DPkW9f9/HnkSuR653DM3fke2ImuRtyHKXmcEaCZ/PXK/5ZDNZoVoe5NXIh8iNwtZKL5E5kOCX+P+x5OJPvDrISa/5l6zWrT95Zc0+VVzr+vxw5rJXoD4kHPxsjjC0Ho5n2tx3WJhk3/EjXrL0IUVoN7wTY0wbqoZexYLBe8ZF7ogwIPEY28XLMCtLggwm3jsdMECzHRBgPOwV+FCSSHA9jnG/iTJmWcD2QuwcY6xH1tc87lgAba6IMD7yN8RxtVjVltct1awAGvZCzAYDGpLl0cYutzS8Pq6rwVO/rcRv9f/sglcarmcH7HZjGnDbuRxdXg8Wgq18I/ix7XbCQGaBxf1JL2pDh/4nMR+Y/X8kJu7+kz8buRl5FNkp4eTvtPcW32Pd1I8B6i5iMfB9fHus+rwkGe2megfzQqxmmJj0yV6+zh4CEEqAvTrHAAdggAEAAFAABAABAABQAAQAAQAAUAA9JtLqd9AOzhvtIPzRTv4FLSDM98DaAePF+3gY2gHZ74CaAenQzu40g7OXgDt4HRoByN/AbSD054NZC+AdnA6tIMr7eC8BdAOToZ2cIN2cO4CaAePBe3gEtAO1g7u3TkAOgQBCAACgAAgAAgAAoAAIAAIAAKAAOg32sGFox2cL9rBp6AdnPkeQDt4vGgHH0M7OPMVQDs4HdrBlXZw9gJoB6dDOxj5C6AdnPZsIHsBtIPToR1caQfnLYB2cDK0gxu0g3MXQDt4LGgHl0Dx7WBUBAABQAAQAAQAAUAAEAAEAAFAABAABAABQAAQAAQAAUAAEAAEAAFAABAABAABMCT/BBgA8SDQyY7AsYEAAAAASUVORK5CYII=",i&&(t.fillColor=e.options.lightColor,t.lineColor=e.options.emphasesColor)),t.hovered&&(t.radius=1.25*t.radius)},n}t.HieknConceptGraphService=n()}(window,jQuery),function(t,e){"use strict";function n(){var t=function(t){var n=this;n.clickTimeout=null,n.isFirst=!0,n.lastSelectedNode=null,n.startAsync=!1,n.treeDbClick=!1;var i={container:null,data:null,baseUrl:null,kgName:null,getAsyncUrl:function(){var t=n.options.data||{};return t.kgName=n.options.kgName,n.options.readAll?t.id=n.getLastSelectedNodeId()||0:t.id=n.getLastSelectedNodeId()||n.options.initId,t.onlySubTree=n.isFirst?0:1,n.options.baseUrl+"concept?"+e.param(t)},idKey:"id",initId:0,nameKey:"name",onNodeClick:e.noop,onNodeHover:e.noop,pIdKey:"parentId",readAll:!1};n.options=e.extend(!0,{},i,t),n.zTreeSettings=null,n.zTree=null,n.init()};return t.prototype.init=function(){var t=this;t.$container=e(t.options.container),t.$container.addClass("ztree hiekn-concept-tree"),t.zTreeSettings=t.updateZTreeSettings(),t.zTree=e.fn.zTree.init(t.$container,t.zTreeSettings)},t.prototype.addHoverDom=function(t,n){var i=this,o=i.select("#"+n.tId+"_span");if(!(i.select("#button-container_"+n.tId).length>0)){var a=e('<span class="button-container" id="button-container_'+n.tId+'" ></span>');o.after(a),i.options.onNodeHover&&i.options.onNodeHover(a,n)}},t.prototype.beforeAsync=function(t,e){var n=this;return e&&(n.startAsync=!0,n.lastSelectedNode=e),!0},t.prototype.dataFilter=function(t,e,n){var i=this;if(200==n.code){if(!n.data||!n.data.rsData)return null;n=n.data.rsData;for(var o=n.length,a=[],s=0;s<o;s++)!i.options.readAll&&(n[s].isParent=!0),e&&n[s][i.options.idKey]==e[i.options.idKey]||a.push(n[s]);if(0!=a.length)return a;e.isParent=!1}else toastr.error(n.msg);return null},t.prototype.expandNodes=function(t){var e=this,n=e.zTree.getNodeByParam(e.options.idKey,t);if(n){e.zTree.expandNode(n,!0,!1,!0,!1);var i=n.getParentNode();i&&e.expandNodes(i[e.options.idKey])}},t.prototype.getLastSelectedNodeId=function(){var t=this;return t.lastSelectedNode?t.lastSelectedNode[t.options.idKey]:null},t.prototype.getAsyncUrl=function(){var t=this;return"string"==typeof t.options.getAsyncUrl?t.options.getAsyncUrl:t.options.getAsyncUrl(t)},t.prototype.onAsyncSuccess=function(t,e,n){var i=this,o=n;o&&i.options.onNodeClick(o),o&&0==o.children.length?(o.isParent=!1,i.zTree.updateNode(o),toastr.info("当前概念没有子概念")):o||(i.expandNodes(i.getLastSelectedNodeId()||i.options.initId),i.getLastSelectedNodeId()||(o=i.zTree.getNodeByParam(i.options.idKey,i.options.initId),i.zTree.selectNode(o),i.options.onNodeClick(o)));var a=i.zTree.getNodeByParam(i.options.idKey,0);i.addHoverDom(e,a),i.isFirst=!1,i.startAsync=!1},t.prototype.onClick=function(t,e,n){var i=this;i.clickTimeout&&clearTimeout(i.clickTimeout),i.clickTimeout=setTimeout(function(){i.lastSelectedNode=n,i.options.onNodeClick(n),i.treeDbClick=!1},500)},t.prototype.onNodeButtonClick=function(t,e){var n=this;n.select(".tree-button-active").removeClass("tree-button-active"),n.zTree.selectNode(e),t.addClass("tree-button-active"),n.lastSelectedNode=e},t.prototype.removeHoverDom=function(t,e){var n=this;if(e.level>0){var i=n.select("#button-container_"+e.tId);i.children().off("click"),i.remove()}},t.prototype.select=function(t){var n=this;return e(n.options.container).find(t)},t.prototype.updateZTreeSettings=function(){var t=this;return{async:{enable:!0,url:function(){return t.getAsyncUrl()},dataFilter:function(e,n,i){return t.dataFilter(e,n,i)},type:"get"},view:{showLine:!1,showIcon:!1,expandSpeed:"fast",dblClickExpand:function(t,e){return e.level>0},selectedMulti:!1,addHoverDom:function(e,n){t.addHoverDom(e,n)},removeHoverDom:function(e,n){t.removeHoverDom(e,n)}},callback:{beforeAsync:function(e,n){return t.beforeAsync(e,n)},onAsyncSuccess:function(e,n,i){return t.onAsyncSuccess(e,n,i)},onClick:function(e,n,i){return t.onClick(e,n,i)},onDblClick:function(){t.treeDbClick=!0}},data:{simpleData:{enable:!0,pIdKey:t.options.pIdKey,idKey:t.options.idKey},key:{name:t.options.nameKey}}}},t}t.HieknConceptTreeService=n()}(window,jQuery),function(){function t(){var t=function(){this.colorList={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}};return t.prototype.drawPromptItem=function(t){var e={};for(var n in t.types){var i=t.types[n];e[i.k]=i.v}return function(t,n){var i='<span class="prompt-tip-title">'+t.name.replace(new RegExp("("+n+")","gi"),'<span class="highlight">$1</span>')+"</span>";return i='<span class="prompt-tip-type prompt-tip-'+t.classId+'">'+(t.className||e[t.classId]||"")+"</span>"+i}},t.prototype.onPrompt=function(t){return function(e,n){var i=t.data||{};i.kgName=t.kgName,i.kw=e,hieknjs.kgLoader({url:t.url?t.url:t.baseUrl+"prompt",params:i,type:1,success:function(o){if(n.prompt==i.kw){var a=o.rsData;t.beforeDrawPrompt&&(a=t.beforeDrawPrompt(a,e)),n.startDrawPromptItems(a,e)}}})}},t.prototype.schema=function(t,e){var n=t.data||{};n.kgName=t.kgName,hieknjs.kgLoader({url:t.baseUrl+"schema",type:1,params:n,success:function(t){if(t&&t.rsData&&t.rsData.length){var n=t.rsData[0];e(n)}},error:function(){toastr.error("网络接口错误！")}})},t.prototype.gentInfobox=function(t){var e=this,n=t.data||{};n.isRelationAtts=!0,e.infoboxService=new HieknInfoboxService({baseUrl:t.baseUrl,kgName:t.kgName,imagePrefix:t.imagePrefix,data:n}),e.infoboxService.initEvent($(t.selector))},t.prototype.infobox=function(){var t=this;return function(e,n,i){return n.detail?i(n.detail):t.infoboxService.load(e.id,function(e){e=t.infoboxService.buildInfobox(e)[0].outerHTML,n.detail=e,i(e)}),null}},t.prototype.legend=function(t){var e={};for(var n in t.types){var i=t.types[n];e[i.k]=i.v}return function(t,n){return'<div class="tgc2-legend-item tgc2-legend-item-'+t+'"><i style="background: '+n+'"></i><span>'+e[t]+"</span></div>"}},t.prototype.qiniuImg=function(t){return t+"?_="+parseInt((new Date).getTime()/36e5)},t.prototype.nodeStyleFunction=function(t){var e=this;return t.enableAutoUpdateStyle&&setInterval(function(){if(e.centerNode){var n=t.tgc2.netChart.getNodeDimensions(e.centerNode).radius;if(e.nodeRadius!=n){var i=t.tgc2.netChart.nodes(),o=[];for(var a in i)o.push(i[a].id);t.tgc2.netChart.updateStyle(o)}}},30),function(n){t.tgc2.nodeStyleFunction(n),n.imageCropping="fit",t.tgc2.inStart(n.id)||t.tgc2.nodeIds[n.id]||($.isEmptyObject(t.tgc2.nodeIds)?(n.fillColor=n.data.color||"#fff",n.lineColor="#00b38a",n.hovered&&(n.fillColor=n.lineColor,n.shadowBlur=0)):(n.fillColor=t.tgc2.settings.netChart.reduceColor,n.lineColor=n.fillColor,n.label="")),t.nodeColors&&t.nodeColors[n.data.classId]&&(n.lineWidth=2,t.tgc2.inStart(n.id)||t.tgc2.nodeIds[n.id]?(n.fillColor=t.tgc2.settings.netChart.emphasesColor,n.lineColor=n.fillColor):$.isEmptyObject(t.tgc2.nodeIds)&&(n.lineColor=t.nodeColors[n.data.classId],n.hovered&&(n.fillColor=n.lineColor))),n.data.img?(0!=n.data.img.indexOf("http")&&t.imagePrefix?n.image=e.qiniuImg(t.imagePrefix+n.data.img):n.image=n.data.img,t.tgc2.inStart(n.id)||t.tgc2.nodeIds[n.id]||$.isEmptyObject(t.tgc2.nodeIds)||(n.image=""),n.fillColor="#fff"):t.images&&t.images[n.data.classId]&&(t.tgc2.inStart(n.id)||t.tgc2.nodeIds[n.id]?n.image=t.images[n.data.classId].emphases:$.isEmptyObject(t.tgc2.nodeIds)?n.hovered?n.image=t.images[n.data.classId].emphases:n.image=t.images[n.data.classId].normal:n.image="");var i=t.tgc2.netChart.getNodeDimensions(n).radius;t.enableAutoUpdateStyle&&(i<t.minRadius&&(n.image="",n.fillColor=n.lineColor),t.tgc2.inStart(n.id)&&(e.nodeRadius=i,!e.centerNode&&(e.centerNode=n)))}},t.prototype.colorFade=function(t,e){try{var n=[];return this.colorList[t]&&(t=this.colorList[t]),0==t.indexOf("rgb")||0==t.indexOf("hsl")?n=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(","):0==t.indexOf("#")&&(t=t.substring(1),n=t.match(/.{2}/g).map(function(t){return parseInt(t,16)})),n[3]=parseInt((n[3]||1)*e*100)/100,0==t.indexOf("hsl")?"hsla("+n[0]+","+n[1]+","+n[2]+","+n[3]+")":"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"}catch(i){return t}},t.prototype.buildFilter=function(t,e){var n=[],i=[],o=[],a=[];for(var s in t.atts){var r=t.atts[s];1==r.type&&(n.push({value:r.k,label:r.v}),i.push(r.k))}for(var l in t.types){var c=t.types[l];o.push({value:c.k,label:c.v}),a.push(c.k)}return i=e.selectedAtts||i,a=e.selectedTypes||a,[{key:"allowTypes",label:"设定分析主体",selected:a,options:o},{key:"allowAtts",label:"设定分析关系",selected:i,options:n}]},t.prototype.dealGraphData=function(t,e){t.nodes=t.entityList,t.links=t.relationList,delete t.entityList,delete t.relationList;var n={},i=_.concat(e.types,e.atts);for(var o in i){var a=i[o];n[a.k]=a.v}for(var s in t.nodes){var r=t.nodes[s];r.typeName=n[r.classId]}for(var l in t.links){var c=t.links[l];c.typeName=n[c.attId]}return t},t.prototype.linkContentsFunction=function(t){if(t.rInfo){var e="";for(var n in t.rInfo){var i=t.rInfo[n];e+="<tr>";var o=i.kvs,a="<tr>",s="<tr>";for(var r in o)o.hasOwnProperty(r)&&(a+='<th><div class="link-info-key">'+o[r].k+"</div></th>",s+='<td><div class="link-info-value">'+o[r].v+"</div></td>");e+="<li><table><thead>"+a+"</thead><tbody>"+s+"</tbody></table></li>"}return'<ul class="link-info">'+e+"</ul>"}return t.typeName},t.prototype.graph=function(t,e){var n=this;return function(i,o,a){var s=t.data||{};if(s.kgName=t.kgName,s.id=t.tgc2.startInfo.id,s.isRelationMerge=!0,t.tgc2Filter){var r=t.tgc2Filter.getFilterOptions();$.extend(!0,s,r)}if(t.tgc2Page){var l=t.tgc2Page.page;s.pageNo=l.pageNo,s.pageSize=l.pageSize}hieknjs.kgLoader({url:t.baseUrl+"graph",type:1,params:s,success:function(t){if(t&&t.rsData&&t.rsData.length){var i=t.rsData[0];i&&(i=n.dealGraphData(i,e)),o(i)}else a()},error:function(){a()},that:$(t.selector).find(".tgc2-netchart-container")[0]})}},t.prototype.timing=function(t,e){var n=this;return function(i,o,a){var s=t.data||{};if(s.kgName=t.kgName,s.id=t.tgc2.startInfo.id,t.tgc2Filter){var r=t.tgc2Filter.getFilterOptions();$.extend(!0,s,r)}if(t.tgc2TimeChart){var l=t.tgc2TimeChart.getSettings();delete l.type,$.extend(!0,s,l)}hieknjs.kgLoader({url:t.baseUrl+"graph/timing",type:1,params:s,success:function(t){if(t&&t.rsData&&t.rsData.length){var i=t.rsData[0];i&&(i=n.dealGraphData(i,e)),o(i)}else a()},error:function(){a()},that:$(t.selector).find(".tgc2-netchart-container")[0]})}},t.prototype.relation=function(t,e){var n=this;return function(i,o,a){var s=_.map(t.tgc2.startInfo.nodes,"id"),r=t.data||{};if(r.ids=s,r.isShortest=!0,r.connectsCompute=!0,r.statsCompute=!0,r.kgName=t.kgName,r.statsConfig=t.statsConfig,t.tgc2Filter){var l=t.tgc2Filter.getFilterOptions();$.extend(!0,r,l)}hieknjs.kgLoader({url:t.baseUrl+"relation",type:1,params:r,success:function(t){if(t&&t.rsData&&t.rsData.length){var i=t.rsData[0];i&&(i=n.dealGraphData(i,e)),o(i)}else a()},error:function(){toastr.error("网络接口错误！"),a()},that:$(t.selector).find(".tgc2-netchart-container")[0]})}},t.prototype.path=function(t,e){var n=this;return function(i,o,a){var s=t.data||{};if(s.start=t.tgc2.startInfo.start.id,s.end=t.tgc2.startInfo.end.id,s.isShortest=!0,s.connectsCompute=!0,s.statsCompute=!0,s.kgName=t.kgName,s.statsConfig=t.statsConfig,t.tgc2Filter){var r=t.tgc2Filter.getFilterOptions();$.extend(!0,s,r)}hieknjs.kgLoader({url:t.baseUrl+"path",type:1,params:s,success:function(t){if(t&&t.rsData&&t.rsData.length){var i=t.rsData[0];i&&(i=n.dealGraphData(i,e)),o(i)}else a()},error:function(){toastr.error("网络接口错误！"),a()},that:$(t.selector).find(".tgc2-netchart-container")[0]})}},t}window.HieknSDKService=t()}(),function(t,e){"use strict";function n(){var n=function(n){var i=this;i.isInit=!1,i.baseSettings={baseUrl:n.baseUrl,data:n.data,kgName:n.kgName},i.filterSettings={selectedAtts:n.selectedAtts,selectedTypes:n.selectedTypes},i.infoboxSettings={selector:n.selector,imagePrefix:n.imagePrefix},e.extend(!0,i.infoboxSettings,i.baseSettings),i.loaderSettings={selector:n.selector,tgc2:null,tgc2Filter:null,tgc2Page:null},e.extend(!0,i.loaderSettings,i.baseSettings),i.nodeSettings={enableAutoUpdateStyle:"boolean"!=typeof n.enableAutoUpdateStyle||n.enableAutoUpdateStyle,imagePrefix:n.imagePrefix,images:n.images,nodeColors:n.nodeColors,minRadius:n.minRadius||10,tgc2:null},i.promptSettings=i.baseSettings,i.schemaSettings=i.baseSettings,i.tgc2Settings={},i.sdkUtils=new t.HieknSDKService,i.sdkUtils.schema(i.schemaSettings,function(t){var o=i.sdkUtils.buildFilter(t,i.filterSettings);o=[{key:"distance",label:"设定显示层数",selected:n.selectedDistance||1,options:[1,2,3]}].concat(o);var a={selector:n.selector,prompt:{enable:!0,style:{left:"20px",top:"40px"},settings:{drawPromptItem:i.sdkUtils.drawPromptItem(t),onPrompt:i.sdkUtils.onPrompt(i.promptSettings)}},page:{style:{right:"10px",bottom:"20px"},enable:!0,pageSize:20},filter:{enable:!0,filters:o},crumb:{enable:!0},find:{enable:!0},legend:{enable:!0,data:n.nodeColors||[],onDraw:i.sdkUtils.legend(t)},netChart:{settings:{nodeMenu:{contentsFunction:i.sdkUtils.infobox()},style:{nodeStyleFunction:i.sdkUtils.nodeStyleFunction(i.nodeSettings)},info:{linkContentsFunction:i.sdkUtils.linkContentsFunction}}},loader:i.sdkUtils.graph(i.loaderSettings,t)};i.tgc2Settings=e.extend(!0,{},a,n.tgc2Settings),i.sdkUtils.gentInfobox(i.infoboxSettings),i.init()})};return n.prototype.init=function(){var t=this;t.tgc2=new Tgc2Graph(t.tgc2Settings),t.tgc2Filter=new Tgc2Filter(t.tgc2,t.tgc2Settings.filter),t.tgc2Prompt=new Tgc2Prompt(t.tgc2,t.tgc2Settings.prompt),t.tgc2Page=new Tgc2Page(t.tgc2,t.tgc2Settings.page),t.tgc2Crumb=new Tgc2Crumb(t.tgc2,t.tgc2Settings.crumb),t.tgc2Find=new Tgc2Find(t.tgc2,t.tgc2Settings.find),t.tgc2Legend=new Tgc2Legend(t.tgc2,t.tgc2Settings.legend),t.loaderSettings.tgc2=t.tgc2,t.loaderSettings.tgc2Filter=t.tgc2Filter,t.loaderSettings.tgc2Page=t.tgc2Page,t.nodeSettings.tgc2=t.tgc2,t.tgc2.init(),t.isInit=!0},n.prototype.load=function(t){var e=this;setTimeout(function(){e.isInit?e.tgc2.load(t):e.load(t)},30)},n}t.HieknGraphService=n()}(window,jQuery),function(t,e){"use strict";function n(){var t=function(t){var n=this,i={selector:null,data:null,baseUrl:null,kgName:null,enableLink:!1,imagePrefix:null,href:null};n.settings=e.extend(!0,{},i,t)};return t.prototype.href=function(t){var e=this;e.load(t,e.callback)},t.prototype.initEvent=function(t){var n=this;t.on("click",".hiekn-infobox-link",function(){var t=e(this).attr("data-id");n.settings.href?n.settings.href(t,n):n.href(t)}),t.on("click",".hiekn-infobox-info-detail a",function(){e(this).closest(".hiekn-infobox-info-detail").toggleClass("on")})},t.prototype.buildEntity=function(t,e){var n=this,i=t.meaningTag?"("+t.meaningTag+")":"",o='<span class="hiekn-infobox-name">'+t.name+'<span class="hiekn-infobox-meaningTag">'+i+"</span></span>";return e&&n.settings.enableLink?'<a href="javascript:void(0)" class="hiekn-infobox-link" data-id="'+t.id+'">'+o+"</a>":o},t.prototype.buildExtra=function(t){var e=t.v||"-";return t.v.length>80&&(e='<span class="hiekn-infobox-info-detail-short">'+t.v.substring(0,56)+'<a href="javascript:void(0)">查看全部&gt;&gt;</a></span><span class="hiekn-infobox-info-detail-long">'+t.v+'<a href="javascript:void(0)">收起&lt;&lt;</a></span>'),'<tr><td class="hiekn-infobox-info-label">'+t.k+'</td><td class="hiekn-infobox-info-detail">'+e+"</td></tr>"},t.prototype.load=function(t,n,i){var o=this,a=o.settings.data||{};a.id=t,a.kgName=o.settings.kgName,hieknjs.kgLoader({url:o.settings.baseUrl+"infobox",type:1,params:a,success:function(t){if(t&&t.rsData&&t.rsData.length){var a=t.rsData[0];if(n)o.callback=n,n(a);else if(o.settings.selector){var s=o.buildInfobox(a);e(o.settings.selector).html(s),o.initEvent(s)}else console.error("selector or callback must be config")}else i&&i()},error:function(){toastr.error("网络接口错误！"),i&&i()}})},t.prototype.buildInfobox=function(t){var n=this,i=e('<div class="hiekn-infobox"></div>');if(t.self){i.append('<div class="hiekn-infobox-head"></div><div class="hiekn-infobox-body"></div>');var o=n.buildEntity(t.self,!1);if(i.find(".hiekn-infobox-head").append('<div class="hiekn-infobox-title">'+o+"</div>"),t.self.img){var a=t.self.img;0!=t.self.img.indexOf("http")&&(a=n.settings.imagePrefix+t.self.img+"?_="+Math.round(new Date/36e5)),i.find(".hiekn-infobox-head").append('<div class="hiekn-infobox-img"><img src="'+a+'" alt=""></div>')}if(t.self.extra){var s="";for(var r in t.self.extra){var l=t.self.extra[r];s+=n.buildExtra(l)}if(t.atts)for(var c in t.atts)if(t.atts.hasOwnProperty(c)){var d=t.atts[c],g="";for(var f in d.v){var p=d.v[f],o=n.buildEntity(p,!0);g+="<li>"+o+"</li>"}s+='<tr><td class="hiekn-infobox-info-label">'+d.k+'</td><td class="hiekn-infobox-info-detail">'+g+"</td></tr>"}i.find(".hiekn-infobox-body").append("<table><tbody>"+s+"</tbody></table>")}if(t.pars){i.find(".hiekn-infobox-head").append('<div class="hiekn-infobox-pars"><label class="hiekn-infobox-label">所属：</label><ul></ul></div>');for(var u in t.pars){var p=t.pars[u],o=n.buildEntity(p,!0);i.find(".hiekn-infobox-pars ul").append("<li>"+o+"</li>")}}if(t.sons){var s="";for(var b in t.sons){var p=t.sons[b],o=n.buildEntity(p,!0);s+="<li>"+o+"</li>"}i.find(".hiekn-infobox-head").append('<div class="hiekn-infobox-pars"><label class="hiekn-infobox-label">相关：</label><ul>'+s+"</ul></div>")}}else i.append("InfoBox读取错误");return i},t.prototype.buildTabInfobox=function(t){var n=this,i=e('<div class="hiekn-infobox hiekn-infobox-tab"></div>');if(t.self){i.append('<div class="hiekn-infobox-head"></div><div class="hiekn-infobox-body"><ul class="nav nav-tabs" role="tablist"></ul><div class="tab-content"></div></div>');var o=n.buildEntity(t.self,!1);if(i.find(".hiekn-infobox-head").append('<div class="hiekn-infobox-title">'+o+"</div>"),t.self.extra){var a="";for(var s in t.self.extra){var r=t.self.extra[s];a+=n.buildExtra(r)}var l="hiekn-infobox-"+(new Date).getTime()+"-"+t.self.id;i.find(".hiekn-infobox-body>.nav-tabs").append('<li role="presentation" class="active"><a href="#'+l+'" role="tab" data-toggle="tab" aria-expanded="true">基本信息</a></li>'),i.find(".hiekn-infobox-body>.tab-content").append('<div role="tabpanel" class="tab-pane-detail tab-pane active" id="'+l+'"><table><tbody>'+a+"</tbody></table></div>")}if(t.pars){i.find(".hiekn-infobox-head").append('<div class="hiekn-infobox-pars"><label class="hiekn-infobox-label">所属：</label><ul></ul></div>');for(var c in t.pars){var d=t.pars[c],o=n.buildEntity(d,!0);i.find(".hiekn-infobox-pars ul").append("<li>"+o+"</li>")}}if(t.sons){var a="";for(var g in t.sons){var d=t.sons[g],o=n.buildEntity(d,!0);a+="<li>"+o+"</li>"}var l="hiekn-infobox-"+(new Date).getTime()+"-sons-"+t.self.id;i.find(".hiekn-infobox-body>.nav-tabs").append('<li role="presentation"><a href="#'+l+'" role="tab" data-toggle="tab" aria-expanded="true">子节点</a></li>'),i.find(".hiekn-infobox-body>.tab-content").append('<div role="tabpanel" class="tab-pane-sons tab-pane" id="'+l+'"><ul>'+a+"</ul></div>")}if(t.atts)for(var f in t.atts)if(t.atts.hasOwnProperty(f)){var p=t.atts[f],a="";for(var u in p.v){var d=p.v[u],o=n.buildEntity(d,!0);a+="<li>"+o+"</li>"}var l="hiekn-infobox-"+(new Date).getTime()+"-att-"+f+"-"+t.self.id;i.find(".hiekn-infobox-body>.nav-tabs").append('<li role="presentation"><a href="#'+l+'" role="tab" data-toggle="tab" aria-expanded="true">'+p.k+"</a></li>"),i.find(".hiekn-infobox-body>.tab-content").append('<div role="tabpanel" class="tab-pane-sons tab-pane" id="'+l+'"><ul>'+a+"</ul></div>")}}else i.append("InfoBox读取错误");return i},t}t.HieknInfoboxService=n()}(window,jQuery),function(t,e){"use strict";function n(){var n=function(n){var i=this;i.isInit=!1,i.baseSettings={baseUrl:n.baseUrl,data:n.data,kgName:n.kgName},i.filterSettings={selectedAtts:n.selectedAtts,selectedTypes:n.selectedTypes},i.infoboxSettings={selector:n.selector,imagePrefix:n.imagePrefix},e.extend(!0,i.infoboxSettings,i.baseSettings),i.loaderSettings={selector:n.selector,statsConfig:n.statsConfig,tgc2:null,tgc2Filter:null,tgc2Page:null},e.extend(!0,i.loaderSettings,i.baseSettings),i.nodeSettings={enableAutoUpdateStyle:"boolean"!=typeof n.enableAutoUpdateStyle||n.enableAutoUpdateStyle,imagePrefix:n.imagePrefix,images:n.images,nodeColors:n.nodeColors,minRadius:n.minRadius||10,tgc2:null},i.promptSettings=i.baseSettings,
i.schemaSettings=i.baseSettings,i.tgc2Settings={},i.sdkUtils=new t.HieknSDKService,i.sdkUtils.schema(i.schemaSettings,function(t){var o=i.sdkUtils.buildFilter(t,i.filterSettings);o=[{key:"distance",label:"设定分析步长",selected:n.selectedDistance||3,options:[3,4,5,6]}].concat(o);var a={selector:n.selector,netChart:{style:{left:"320px"},settings:{nodeMenu:{contentsFunction:i.sdkUtils.infobox()},style:{nodeStyleFunction:i.sdkUtils.nodeStyleFunction(i.nodeSettings)},info:{linkContentsFunction:i.sdkUtils.linkContentsFunction}}},filter:{enable:!0,filters:o},stats:{enable:!0},connects:{enable:!0},crumb:{enable:!0},find:{enable:!0},legend:{enable:!1,style:{left:"390px"},data:n.nodeColors||[],onDraw:i.sdkUtils.legend(t)},loader:i.sdkUtils.path(i.loaderSettings,t),schema:t,path:{prompt:{settings:{drawPromptItem:i.sdkUtils.drawPromptItem(t),onPrompt:i.sdkUtils.onPrompt(i.promptSettings)}}}};i.tgc2Settings=e.extend(!0,{},a,n.tgc2Settings),i.sdkUtils.gentInfobox(i.infoboxSettings),i.init()})};return n.prototype.init=function(){var t=this;t.tgc2=new Tgc2Path(t.tgc2Settings),t.tgc2Filter=new Tgc2Filter(t.tgc2,t.tgc2Settings.filter),t.tgc2Stats=new Tgc2Stats(t.tgc2,t.tgc2Settings.stats),t.tgc2Connects=new Tgc2Connects(t.tgc2,t.tgc2Settings.connects),t.tgc2Crumb=new Tgc2Crumb(t.tgc2,t.tgc2Settings.crumb),t.tgc2Find=new Tgc2Find(t.tgc2,t.tgc2Settings.find),t.tgc2Legend=new Tgc2Legend(t.tgc2,t.tgc2Settings.legend),t.loaderSettings.tgc2=t.tgc2,t.loaderSettings.tgc2Filter=t.tgc2Filter,t.loaderSettings.tgc2Page=t.tgc2Page,t.nodeSettings.tgc2=t.tgc2,t.tgc2.init(),t.isInit=!0},n.prototype.load=function(t){var e=this;setTimeout(function(){e.isInit?e.tgc2.load(t):e.load(t)},30)},n}t.HieknPathService=n()}(window,jQuery),function(t,e){"use strict";function n(){var t=function(t){var n=this,i={beforeDrawPrompt:null,container:null,data:null,url:null,baseUrl:null,kgName:null,ready:e.noop,onSearch:e.noop};n.settings=e.extend(!0,{},i,t),n.init()};return t.prototype.init=function(){var t=this,n=new HieknSDKService(t.settings);n.schema(t.settings,function(i){var o={drawPromptItem:n.drawPromptItem(i),onPrompt:n.onPrompt(t.settings)};e.extend(!0,o,t.settings),t.instance=new hieknPrompt(o),t.settings.ready(t.instance)})},t}t.HieknPromptService=n()}(window,jQuery),function(t,e){"use strict";function n(){var n=function(n){var i=this;i.isInit=!1,i.baseSettings={baseUrl:n.baseUrl,data:n.data,kgName:n.kgName},i.filterSettings={selectedAtts:n.selectedAtts,selectedTypes:n.selectedTypes},i.infoboxSettings={selector:n.selector,imagePrefix:n.imagePrefix},e.extend(!0,i.infoboxSettings,i.baseSettings),i.loaderSettings={selector:n.selector,statsConfig:n.statsConfig,tgc2:null,tgc2Filter:null,tgc2Page:null},e.extend(!0,i.loaderSettings,i.baseSettings),i.nodeSettings={enableAutoUpdateStyle:"boolean"!=typeof n.enableAutoUpdateStyle||n.enableAutoUpdateStyle,imagePrefix:n.imagePrefix,images:n.images,nodeColors:n.nodeColors,minRadius:n.minRadius||10,tgc2:null},i.promptSettings=i.baseSettings,i.schemaSettings=i.baseSettings,i.tgc2Settings={},i.sdkUtils=new t.HieknSDKService,i.sdkUtils.schema(i.schemaSettings,function(t){var o=i.sdkUtils.buildFilter(t,i.filterSettings);o=[{key:"distance",label:"设定分析步长",selected:n.selectedDistance||3,options:[3,4,5,6]}].concat(o);var a={selector:n.selector,netChart:{style:{left:"320px"},settings:{nodeMenu:{contentsFunction:i.sdkUtils.infobox()},style:{nodeStyleFunction:i.sdkUtils.nodeStyleFunction(i.nodeSettings)},info:{linkContentsFunction:i.sdkUtils.linkContentsFunction}}},filter:{enable:!0,filters:o},stats:{enable:!0},connects:{enable:!0},crumb:{enable:!0},find:{enable:!0},legend:{enable:!1,style:{left:"390px"},data:n.nodeColors||[],onDraw:i.sdkUtils.legend(t)},loader:i.sdkUtils.relation(i.loaderSettings,t),schema:t,relation:{prompt:{settings:{drawPromptItem:i.sdkUtils.drawPromptItem(t),onPrompt:i.sdkUtils.onPrompt(i.promptSettings)}}}};i.tgc2Settings=e.extend(!0,{},a,n.tgc2Settings),i.sdkUtils.gentInfobox(i.infoboxSettings),i.init()})};return n.prototype.init=function(){var t=this;t.tgc2=new Tgc2Relation(t.tgc2Settings),t.tgc2Filter=new Tgc2Filter(t.tgc2,t.tgc2Settings.filter),t.tgc2Stats=new Tgc2Stats(t.tgc2,t.tgc2Settings.stats),t.tgc2Connects=new Tgc2Connects(t.tgc2,t.tgc2Settings.connects),t.tgc2Crumb=new Tgc2Crumb(t.tgc2,t.tgc2Settings.crumb),t.tgc2Find=new Tgc2Find(t.tgc2,t.tgc2Settings.find),t.tgc2Legend=new Tgc2Legend(t.tgc2,t.tgc2Settings.legend),t.loaderSettings.tgc2=t.tgc2,t.loaderSettings.tgc2Filter=t.tgc2Filter,t.loaderSettings.tgc2Page=t.tgc2Page,t.nodeSettings.tgc2=t.tgc2,t.tgc2.init(),t.isInit=!0},n.prototype.load=function(t){var e=this;setTimeout(function(){e.isInit?e.tgc2.load(t):e.load(t)},30)},n}t.HieknRelationService=n()}(window,jQuery),function(t,e){"use strict";function n(){var n=function(n){var i=this;i.isInit=!1,i.baseSettings={baseUrl:n.baseUrl,data:n.data,kgName:n.kgName},i.filterSettings={selectedAtts:n.selectedAtts,selectedTypes:n.selectedTypes},i.infoboxSettings={selector:n.selector,imagePrefix:n.imagePrefix},e.extend(!0,i.infoboxSettings,i.baseSettings),i.loaderSettings={selector:n.selector,tgc2:null,tgc2Filter:null,tgc2TimeChart:null},e.extend(!0,i.loaderSettings,i.baseSettings),i.nodeSettings={enableAutoUpdateStyle:"boolean"!=typeof n.enableAutoUpdateStyle||n.enableAutoUpdateStyle,imagePrefix:n.imagePrefix,images:n.images,nodeColors:n.nodeColors,minRadius:n.minRadius||10,tgc2:null},i.promptSettings=i.baseSettings,i.schemaSettings=i.baseSettings,i.tgc2Settings={},i.sdkUtils=new t.HieknSDKService,i.sdkUtils.schema(i.schemaSettings,function(t){var o=i.sdkUtils.buildFilter(t,i.filterSettings),a={selector:n.selector,prompt:{enable:!0,style:{left:"20px",top:"40px"},settings:{drawPromptItem:i.sdkUtils.drawPromptItem(t),onPrompt:i.sdkUtils.onPrompt(i.promptSettings)}},filter:{enable:!0,filters:o},crumb:{enable:!0},find:{enable:!0},legend:{enable:!0,data:n.nodeColors||[],onDraw:i.sdkUtils.legend(t)},timeChart:{enable:!0,style:{left:"200px",right:"20px"}},netChart:{settings:{nodeMenu:{contentsFunction:i.sdkUtils.infobox()},style:{nodeStyleFunction:i.sdkUtils.nodeStyleFunction(i.nodeSettings)},info:{linkContentsFunction:i.sdkUtils.linkContentsFunction}}},loader:i.sdkUtils.timing(i.loaderSettings,t)};i.tgc2Settings=e.extend(!0,{},a,n.tgc2Settings),i.sdkUtils.gentInfobox(i.infoboxSettings),i.init()})};return n.prototype.init=function(){var t=this;t.tgc2=new Tgc2Graph(t.tgc2Settings),t.tgc2Filter=new Tgc2Filter(t.tgc2,t.tgc2Settings.filter),t.tgc2TimeChart=new Tgc2TimeChart(t.tgc2,t.tgc2Settings.timeChart),t.tgc2Prompt=new Tgc2Prompt(t.tgc2,t.tgc2Settings.prompt),t.tgc2Crumb=new Tgc2Crumb(t.tgc2,t.tgc2Settings.crumb),t.tgc2Find=new Tgc2Find(t.tgc2,t.tgc2Settings.find),t.tgc2Legend=new Tgc2Legend(t.tgc2,t.tgc2Settings.legend),t.loaderSettings.tgc2=t.tgc2,t.loaderSettings.tgc2Filter=t.tgc2Filter,t.loaderSettings.tgc2TimeChart=t.tgc2TimeChart,t.nodeSettings.tgc2=t.tgc2,t.tgc2.init(),t.isInit=!0;try{t.tgc2TimeChart.$settingModal.find(".input-daterange").datepicker({format:"yyyy-mm-dd"}),t.tgc2TimeChart.$settingModal.find(".input-daterange").find("input").prop("type","text")}catch(e){}},n.prototype.load=function(t){var e=this;setTimeout(function(){e.isInit?e.tgc2.load(t):e.load(t)},30)},n}t.HieknTimingGraphService=n()}(window,jQuery);